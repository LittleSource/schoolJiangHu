(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/common/search"],{"18d6":function(t,e,s){"use strict";s.r(e);var a=s("9fd7"),i=s("e713");for(var o in i)"default"!==o&&function(t){s.d(e,t,function(){return i[t]})}(o);s("9b49");var r=s("2877"),n=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=n.exports},"45c5":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s("2f62"),i={data:function(){return{confession:[],market:[],job:[],user:[],keyword:"",oldKeywordList:[],hotKeywordList:[],keywordList:[],forbid:"",isShowKeywordList:!1}},computed:(0,a.mapState)(["selectSchool"]),onLoad:function(){this.loadOldKeyword(),this.loadHotKeyword()},methods:{goConfession:function(e){this.saveKeyword(),t.navigateTo({url:"/pages/index/confession/detail?id="+e})},goJob:function(e){this.saveKeyword(),t.navigateTo({url:"/pages/index/parttime/details?id="+e})},goMarket:function(e,s){this.saveKeyword(),t.navigateTo({url:"/pages/index/market/market?market_id="+e+"&market_name="+s})},doSearch:function(t){this.keyword=t,this.inputChange()},back:function(){t.navigateBack()},blur:function(){t.hideKeyboard()},loadOldKeyword:function(){var e=this;t.getStorage({key:"OldKeys",success:function(t){var s=JSON.parse(t.data);e.oldKeywordList=s}})},loadHotKeyword:function(){this.hotKeywordList=["电子","天津","手机"]},inputChange:function(){var e=this,s=this.keyword;if(!s)return this.keywordList=[],void(this.isShowKeywordList=!1);this.isShowKeywordList=!0,t.request({url:this.GLOBAL.serverSrc+"common/seek/searchMess",method:"GET",data:{title:s,id:this.selectSchool.id},success:function(t){e.confession=t.data.confession,e.job=t.data.job,e.market=t.data.market,e.user=t.data.user,console.log(JSON.stringify(t))},fail:function(t){e.GLOBAL.requestFail(t)}})},oldDelete:function(){var e=this;t.showModal({content:"确定清除历史搜索记录？",success:function(s){s.confirm?(console.log("用户点击确定"),e.oldKeywordList=[],t.removeStorage({key:"OldKeys"})):s.cancel&&console.log("用户点击取消")}})},hotToggle:function(){this.forbid=this.forbid?"":"_forbid"},saveKeyword:function(){var e=this,s=this.keyword;t.getStorage({key:"OldKeys",success:function(a){var i=JSON.parse(a.data),o=i.indexOf(s);-1==o?i.unshift(s):(i.splice(o,1),i.unshift(s)),i.length>10&&i.pop(),t.setStorage({key:"OldKeys",data:JSON.stringify(i)}),e.oldKeywordList=i},fail:function(a){var i=[s];t.setStorage({key:"OldKeys",data:JSON.stringify(i)}),e.oldKeywordList=i}})}}};e.default=i}).call(this,s("6e42")["default"])},5850:function(t,e,s){},6839:function(t,e,s){"use strict";s("7f79");var a=o(s("b0ce")),i=o(s("18d6"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(i.default))},"9b49":function(t,e,s){"use strict";var a=s("5850"),i=s.n(a);i.a},"9fd7":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",[t._m(0),s("view",{staticClass:"content"},[s("view",{staticClass:"search-box"},[s("view",{staticClass:"input-box"},[s("view",{staticClass:"grace-iconfont icon-arrow-left",attrs:{eventid:"71fa5f65-0"},on:{click:function(e){t.back()}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{focus:"",type:"text",placeholder:t.hotKeywordList[0],"placeholder-class":"placeholder-class","confirm-type":"search",eventid:"71fa5f65-1"},domProps:{value:t.keyword},on:{input:[function(e){e.target.composing||(t.keyword=e.target.value)},t.inputChange],confirm:function(e){t.inputChange()}}})]),s("view",{staticClass:"search-btn",attrs:{eventid:"71fa5f65-2"},on:{tap:function(e){t.inputChange()}}},[t._v("搜索")])]),s("view",{staticClass:"search-keyword",attrs:{eventid:"71fa5f65-11"},on:{touchstart:t.blur}},[s("scroll-view",{directives:[{name:"show",rawName:"v-show",value:t.isShowKeywordList,expression:"isShowKeywordList"}],staticClass:"keyword-list-box",attrs:{"scroll-y":""}},[t.user.length>0?s("view",[s("view",{staticClass:"grace-title grace-nowrap"},[s("view",{staticClass:"grace-h5 grace-blod"},[t._v("校友")])]),t._l(t.user,function(e,a){return s("view",{key:a,staticClass:"keyword-entry",attrs:{"hover-class":"keyword-entry-tap"}},[s("view",{staticClass:"keyword-text",attrs:{eventid:"71fa5f65-3-"+a},on:{click:function(s){t.goUser(e.user_id)}}},[s("rich-text",{attrs:{nodes:e.user_name,mpcomid:"71fa5f65-0-"+a}})],1),s("view",{staticClass:"keyword-img"},[s("image",{attrs:{src:"../../static/search/back.png"}})])])})],2):t._e(),t.confession.length>0?s("view",[s("view",{staticClass:"grace-title grace-nowrap"},[s("view",{staticClass:"grace-h5 grace-blod"},[t._v("表白墙")])]),t._l(t.confession,function(e,a){return s("view",{key:a,staticClass:"keyword-entry",attrs:{"hover-class":"keyword-entry-tap"}},[s("view",{staticClass:"keyword-text",attrs:{eventid:"71fa5f65-4-"+a},on:{click:function(s){t.goConfession(e.article_id)}}},[s("rich-text",{attrs:{nodes:e.content,mpcomid:"71fa5f65-1-"+a}})],1),s("view",{staticClass:"keyword-img"},[s("image",{attrs:{src:"../../static/search/back.png"}})])])})],2):t._e(),t.market.length>0?s("view",[s("view",{staticClass:"grace-title grace-nowrap"},[s("view",{staticClass:"grace-h5 grace-blod"},[t._v("超市")])]),t._l(t.market,function(e,a){return s("view",{key:a,staticClass:"keyword-entry",attrs:{"hover-class":"keyword-entry-tap"}},[s("view",{staticClass:"keyword-text",attrs:{eventid:"71fa5f65-5-"+a},on:{click:function(s){t.goMarket(e.market_id,e.market_name)}}},[s("rich-text",{attrs:{nodes:e.market_name,mpcomid:"71fa5f65-2-"+a}})],1),s("view",{staticClass:"keyword-img"},[s("image",{attrs:{src:"../../static/search/back.png"}})])])})],2):t._e(),t.job.length>0?s("view",[s("view",{staticClass:"grace-title grace-nowrap"},[s("view",{staticClass:"grace-h5 grace-blod"},[t._v("兼职")])]),t._l(t.job,function(e,a){return s("view",{key:a,staticClass:"keyword-entry",attrs:{"hover-class":"keyword-entry-tap"}},[s("view",{staticClass:"keyword-text",attrs:{eventid:"71fa5f65-6-"+a},on:{click:function(s){t.goJob(e.id)}}},[s("rich-text",{attrs:{nodes:e.jobtitle,mpcomid:"71fa5f65-3-"+a}})],1),s("view",{staticClass:"keyword-img"},[s("image",{attrs:{src:"../../static/search/back.png"}})])])})],2):t._e()]),s("scroll-view",{directives:[{name:"show",rawName:"v-show",value:!t.isShowKeywordList,expression:"!isShowKeywordList"}],staticClass:"keyword-box",attrs:{"scroll-y":""}},[t.oldKeywordList.length>0?s("view",{staticClass:"keyword-block"},[s("view",{staticClass:"keyword-list-header"},[s("view",[t._v("历史搜索")]),s("view",[s("image",{attrs:{src:"../../static/search/delete.png",eventid:"71fa5f65-7"},on:{tap:t.oldDelete}})])]),s("view",{staticClass:"keyword"},t._l(t.oldKeywordList,function(e,a){return s("view",{key:e,attrs:{eventid:"71fa5f65-8-"+a},on:{tap:function(s){t.doSearch(e)}}},[t._v(t._s(e))])}))]):t._e(),s("view",{staticClass:"keyword-block"},[s("view",{staticClass:"keyword-list-header"},[s("view",[t._v("热门搜索")]),s("view",[s("image",{attrs:{src:"../../static/search/attention"+t.forbid+".png",eventid:"71fa5f65-9"},on:{tap:t.hotToggle}})])]),""==t.forbid?s("view",{staticClass:"keyword"},t._l(t.hotKeywordList,function(e,a){return s("view",{key:e,attrs:{eventid:"71fa5f65-10-"+a},on:{tap:function(s){t.doSearch(e)}}},[t._v(t._s(e))])})):s("view",{staticClass:"hide-hot-tis"},[s("view",[t._v("当前搜热门搜索已隐藏")])])])])],1)])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"header"},[s("view",{staticClass:"status-bar"})])}];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i})},e713:function(t,e,s){"use strict";s.r(e);var a=s("45c5"),i=s.n(a);for(var o in a)"default"!==o&&function(t){s.d(e,t,function(){return a[t]})}(o);e["default"]=i.a}},[["6839","common/runtime","common/vendor"]]]);