(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/common/comment"],{1886:function(t,e,n){"use strict";var s=n("d9b8"),i=n.n(s);i.a},"1ed9":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n("2f62");function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o={data:function(){var t;return t={articleId:0,textPlaceholder:"写评论",commentList:[],focus:!1,content:"",commentId:0,commentatorId:0},i(t,"commentId",0),i(t,"isreplyReply",!1),i(t,"replierId",0),t},computed:(0,s.mapState)(["user"]),onLoad:function(e){this.articleId=e.articleId,t.startPullDownRefresh()},onPullDownRefresh:function(){this.getBody(),t.stopPullDownRefresh()},methods:{getBody:function(){var e=this;t.request({url:this.GLOBAL.serverSrc+"/confession/article/getComment",method:"GET",data:{phone:this.user.phone,article_id:this.articleId},success:function(t){e.commentList=[],e.commentList=t.data.commentAndReplyList},fail:function(t){e.GLOBAL.requestFail(t)}}),this.content=""},thumbsUpComment:function(e){var n=this;1!==this.commentList[e].thumbs_up_status?(this.commentList[e].thumbs_up_status=1,this.commentList[e].thumbs_up=this.commentList[e].thumbs_up+1):(this.commentList[e].thumbs_up_status=0,this.commentList[e].thumbs_up=this.commentList[e].thumbs_up-1),t.request({url:this.GLOBAL.serverSrc+"confession/article/addthumbsup",method:"POST",data:{phone:this.user.phone,token:this.user.token,comment_id:this.commentList[e].comment_id},success:function(t){410===t.status&&n.GLOBAL.tokenFail()}})},blur:function(){this.focus=!1},replyOne:function(t,e,n){this.isreplyReply=!1,this.commentatorId=e,this.commentId=n,this.textPlaceholder="@回复 "+t,this.focus=!0},replyReply:function(t,e,n){this.replierId=e,this.commentId=n,this.textPlaceholder="@回复 "+t,this.focus=!0,this.isreplyReply=!0},replySubmit:function(){var e=this;""!==this.content.trim()&&("写评论"===this.textPlaceholder?t.request({url:this.GLOBAL.serverSrc+"/confession/article/addcomment",method:"POST",data:{token:this.user.token,phone:this.user.phone,comment_content:this.content,article_id:this.this.articleId},success:function(n){200===n.data.status?e.getBody():410===n.data.status?e.GLOBAL.tokenFail():t.showToast({title:n.data.msg,icon:"none"})},fail:function(t){e.GLOBAL.requestFail(t)},complete:function(){}}):this.isreplyReply?t.request({url:this.GLOBAL.serverSrc+"/confession/article/reply",method:"POST",data:{token:this.user.token,phone:this.user.phone,reply_content:this.content,comment_id:this.commentId,toReplier_id:this.replierId},success:function(n){200===n.data.status?e.getBody():410===n.data.status?e.GLOBAL.tokenFail():t.showToast({title:n.data.msg,icon:"none"})},fail:function(t){e.GLOBAL.requestFail(t)},complete:function(){}}):t.request({url:this.GLOBAL.serverSrc+"/confession/article/replyComment",method:"POST",data:{token:this.user.token,phone:this.user.phone,reply_content:this.content,comment_id:this.commentId,commentator_id:this.commentatorId},success:function(n){200===n.data.status?e.getBody():410===n.data.status?e.GLOBAL.tokenFail():t.showToast({title:n.data.msg,icon:"none"})},fail:function(t){e.GLOBAL.requestFail(t)},complete:function(){}}))}}};e.default=o}).call(this,n("6e42")["default"])},"356e":function(t,e,n){"use strict";n("7f79");var s=o(n("b0ce")),i=o(n("8019"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(i.default))},8019:function(t,e,n){"use strict";n.r(e);var s=n("efeb"),i=n("fee7");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("1886");var c=n("2877"),a=Object(c["a"])(i["default"],s["a"],s["b"],!1,null,null,null);e["default"]=a.exports},d9b8:function(t,e,n){},efeb:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("view",{staticClass:"grace-comment grace-padding",staticStyle:{"margin-bottom":"90rpx"}},t._l(t.commentList,function(e,s){return n("view",{key:s},[n("view",{staticClass:"grace-comment-list"},[n("view",{staticClass:"grace-comment-face"},[n("image",{attrs:{src:e.avatar,mode:"widthFix"}})]),n("view",{staticClass:"grace-comment-body"},[n("view",{staticClass:"grace-comment-top"},[n("text",[t._v(t._s(e.commentator_name))]),1!==e.thumbs_up_status?n("text",{staticClass:"grace-iconfont icon-zan",attrs:{eventid:"deb5a77c-1-"+s},on:{click:function(e){t.thumbsUpComment(s)}}}):n("text",{staticClass:"iconfont icon-thumbs-up",attrs:{eventid:"deb5a77c-0-"+s},on:{click:function(e){t.thumbsUpComment(s)}}})]),n("view",{staticClass:"grace-comment-date"},[n("text",[t._v(t._s(e.comment_time))]),n("text",[t._v(t._s(e.thumbs_up))])]),n("view",{staticClass:"grace-comment-content",attrs:{eventid:"deb5a77c-2-"+s},on:{click:function(n){t.replyOne(e.commentator_name,e.commentator_id,e.comment_id)}}},[t._v(t._s(e.comment_content))])])]),t._l(e.reply_list,function(i,o){return n("view",{key:o,staticClass:"ymkj-reply-list"},[n("view",{staticClass:"grace-comment-body",staticStyle:{"margin-left":"90rpx"}},[n("view",{staticClass:"ymkj-reply-top grace-rows"},[n("text",[t._v(t._s(i.replier_name))]),n("text",{staticClass:"ymkj-reply-margin grace-iconfont icon-arrow-right"}),n("text",{staticClass:"ymkj-reply-margin"},[t._v(t._s(i.toReplier_name))]),n("text",{staticClass:"ymkj-reply-margin",staticStyle:{color:"gray"}},[t._v(t._s(i.reply_time))])]),n("view",{staticClass:"grace-comment-content",attrs:{eventid:"deb5a77c-3-"+s+"-"+o},on:{click:function(n){t.replyReply(i.replier_name,i.replier_id,e.comment_id)}}},[t._v(t._s(i.reply_content))])])])})],2)})),n("view",{staticClass:"grace-footer"},[n("view",{staticClass:"grace-input"},[n("view",{staticClass:"grace-input-icon grace-iconfont icon-write"}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{focus:t.focus,type:"text",placeholder:t.textPlaceholder,eventid:"deb5a77c-4"},domProps:{value:t.content},on:{blur:t.blur,input:function(e){e.target.composing||(t.content=e.target.value)}}})]),n("view",{staticClass:"grace-items",staticStyle:{padding:"0 20rpx"},attrs:{eventid:"deb5a77c-5"},on:{click:t.replySubmit}},[t._v("发布")])])])},i=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return i})},fee7:function(t,e,n){"use strict";n.r(e);var s=n("1ed9"),i=n.n(s);for(var o in s)"default"!==o&&function(t){n.d(e,t,function(){return s[t]})}(o);e["default"]=i.a}},[["356e","common/runtime","common/vendor"]]]);