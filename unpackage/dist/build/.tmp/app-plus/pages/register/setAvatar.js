(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/register/setAvatar"],{1378:function(t,e,a){"use strict";a.r(e);var s=a("66af"),i=a("154f");for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);a("c3d5");var n=a("2877"),c=Object(n["a"])(i["default"],s["a"],s["b"],!1,null,null,null);e["default"]=c.exports},"154f":function(t,e,a){"use strict";a.r(e);var s=a("f61e"),i=a.n(s);for(var r in s)"default"!==r&&function(t){a.d(e,t,function(){return s[t]})}(r);e["default"]=i.a},"28a6":function(t,e,a){"use strict";a("859d");var s=r(a("b0ce")),i=r(a("1378"));function r(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(i.default))},"66af":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"s-page-wrapper"},[a("view",{staticClass:"s-page has-pd-20"},[a("view",{staticClass:"has-mgt-35"},[a("view",{staticClass:"is-size-25 has-title-color is-bold"},[t._v("设置您的头像和昵称")]),a("view",{staticClass:"has-desc-color  has-mgt-5  is-bold"},[t._v("提升同学对你的第一印像")]),a("view",{staticClass:"is-block has-mgt-60 has-mgb-15"},[a("view",[a("view",{staticClass:"grace-center avatar-box",attrs:{eventid:"59b2495c-0"},on:{click:t.uploadAvater}},[0===t.avatarPath.length?a("image",{staticClass:"avatar",attrs:{src:"../../static/register/chooseAvater.png"}}):a("image",{staticClass:"avatar",attrs:{src:t.avatarPath}})]),a("view",{staticClass:"form"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],staticClass:"input",attrs:{type:"text",placeholder:"设置昵称",maxlength:"8",eventid:"59b2495c-1"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}})])])]),a("view",{staticClass:"button-sp-area"},[a("button",{attrs:{type:"primary",eventid:"59b2495c-2"},on:{click:t.submit}},[t._v("完成注册")])],1)])]),a("view",{staticClass:"grace-steps grace-center",staticStyle:{margin:"30% 15% 0",width:"70%"}},[t._m(0),a("view",{staticClass:"step",attrs:{eventid:"59b2495c-3"},on:{click:t.back}},[a("view",{staticClass:"step-circle"},[t._v("2")]),t._m(1)]),t._m(2)])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"step"},[a("view",{staticClass:"step-circle"},[t._v("1")]),a("view",{staticClass:"step-content"},[a("view",{staticClass:"step-title"},[t._v("第一步")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"step-content"},[a("view",{staticClass:"step-title"},[t._v("第二步")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"step current"},[a("view",{staticClass:"step-circle"},[t._v("3")]),a("view",{staticClass:"step-content"},[a("view",{staticClass:"step-title"},[t._v("第三步")])])])}];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return i})},b73d:function(t,e,a){},c3d5:function(t,e,a){"use strict";var s=a("b73d"),i=a.n(s);i.a},f61e:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a("2f62");function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),s.forEach(function(e){r(t,e,a[e])})}return t}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var n={data:function(){return{userName:"",avatarPath:"",hasAvatar:!1}},computed:(0,s.mapState)(["user","school"]),methods:i({},(0,s.mapMutations)(["regSetUserName","regAfterLogin","regSetAvatar"]),{submit:function(){var e=this;this.userName.length<=0||this.userName.length>8?t.showToast({title:"请输入正确的昵称",icon:"none"}):0!==this.avatarPath.length?(this.regSetUserName(this.userName),t.request({url:this.GLOBAL.serverSrc+"/common/register/register",method:"POST",data:{phone:this.user.phone,password:this.user.password,user_name:this.user.userName,avatar:this.user.avatar,sex:this.user.sex,id:this.school.id},success:function(a){200===a.data.status?(e.regAfterLogin(a.data),t.showToast({title:a.data.msg,icon:"none"}),t.switchTab({url:"../index/index"})):t.showToast({title:a.data.msg,icon:"none"})},fail:function(t){e.GLOBAL.requestFail(t)}})):t.showToast({title:"您还未上传头像",icon:"none"})},uploadAvater:function(){var e=this,a=this.GLOBAL.serverSrc;t.chooseImage({count:1,success:function(s){var i=s.tempFilePaths[0];t.showLoading({title:"上传中..."}),t.uploadFile({url:a+"/common/register/uploadAvatar",filePath:i,name:"avatar",success:function(s){var i=JSON.parse(s.data);200===i.status?(e.avatarPath=a+i.url,e.regSetAvatar(e.avatarPath),e.hasAvatar=!0):t.showToast({title:i.msg,icon:"none"})},fail:function(t){_self.global_.requestFail(t)},complete:function(){t.hideLoading()}})}})},back:function(){t.navigateBack()}})};e.default=n}).call(this,a("6e42")["default"])}},[["28a6","common/runtime","common/vendor"]]]);