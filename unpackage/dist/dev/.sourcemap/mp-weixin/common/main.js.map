{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/App.vue","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/global.vue","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/App.vue?347c","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/global.vue?fdb0","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/App.vue?bc4f","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/App.vue?1336","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/App.vue?5dbe","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/global.vue?4385","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/global.vue?b863","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/global.vue?a8b8","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/main.js","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/store/index.js"],"names":["computed","methods","onLaunch","user","uni","getStorageSync","hasLogin","appOnLunch","connectSocket","url","GLOBAL","serverChat","onMessage","onShow","onHide","request","serverSrc","method","data","msgList","console","log","requestFail","e","statusCode","showToast","title","icon","tokenFail","removeStorage","key","redirectTo","checkUpdater","currentId","updaterPage","success","res","version","showModal","content","confirm","navigateTo","playMessage","innerAudioContext","createInnerAudioContext","autoplay","src","onPlay","onError","errMsg","errCode","Vue","config","productionTip","prototype","global_","$store","store","App","mpType","app","$mount","use","Vuex","Store","state","id","openId","type","token","phone","avatar","password","userName","sex","merchant","addressInfo","name","city","adress","school","addr","selectSchool","to_id","msg","status","unread","unreadCount","historyMsg","face","ctype","date","mutations","regSetPhoneAndPass","payload","regSetSex","regSetSchool","regSetAvatar","regSetUserName","regAfterLogin","user_id","user_name","commit","login","logOut","clearStorage","loginAfterSetStorage","setStorage","setOpenId","playload","checkSchool","fail","showCancel","changeAddressInfo","setTabBarBadge","index","text","toString","_self","onSocketOpen","initDate","sendSocketMessage","JSON","stringify","onSocketMessage","global","newMsg","parse","Object","msgListText","msgObj","addMsg","hasMsg","i","length","push","unshift","sendMsg","msgListObj","changeMsg","removeTabBarBadge","delMsg","splice","setMsgStorage"],"mappings":"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","file":"common/main.js","sourcesContent":["\n\timport {\n\t\tmapMutations,\n\t\tmapState\n\t} from 'vuex'\n\texport default {\n\t\tcomputed: mapState(['msgList']),\n\t\tmethods: {\n\t\t\t...mapMutations(['appOnLunch', 'addMsg', 'onMessage'])\n\t\t},\n\t\tonLaunch: function() {\n\t\t\tvar user = uni.getStorageSync('user');\n\t\t\tif (user.hasLogin === true) {\n\t\t\t\tthis.appOnLunch(user);\n\t\t\t\tuni.connectSocket({\n\t\t\t\t\turl: this.GLOBAL.serverChat,\n\t\t\t\t});\n\t\t\t\tthis.onMessage();\n\t\t\t}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t},\n\t\tonShow: function() {\n// \t\t\tuni.showModal({\n// \t\t\t\ttitle: '提示',\n// \t\t\t\tcontent: '此版本为源梦团队内部测试版本，未经允许禁止发布到互联网！www.ym998.cn',\n// \t\t\t\tshowCancel: false\n// \t\t\t});\n\t\t},\n\t\tonHide: function() {\n\t\t\tuni.connectSocket({\n\t\t\t\turl: this.GLOBAL.serverChat,\n\t\t\t});\n\t\t\tthis.onMessage();\n\t\t\tuni.request({\n\t\t\t\turl: this.GLOBAL.serverSrc + 'message/top_chat/recordlist',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\t'msgList': this.msgList\n\t\t\t\t}\n\t\t\t});\n\t\t\tconsole.log('App Hide');\n\t\t}\n\t}\n","\n\n\n\n\n\n//全局配置文件\nconst serverChat = 'ws://118.24.124.19:8282';\nconst serverSrc = 'https://apii.ym998.cn/';//https://apii.ym998.cn/\nexport default {\n\tserverSrc, //服务器地址\n\tserverChat,\n\trequestFail: function(e) {\n\t\tif (e.statusCode === 0) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '网络错误, 请确保设备处在联网状态',\n\t\t\t\ticon:'none'\n\t\t\t});\n\t\t} else {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '发生网络错误啦！错误码：' + e.statusCode,\n\t\t\t\ticon:'none'\n\t\t\t});\n\t\t}\n\t},\n\ttokenFail: function() {\n\t\tuni.showToast({\n\t\t\ttitle: '身份验证失效，请重新登录！',\n\t\t\ticon: \"none\"\n\t\t});\n\t\tuni.removeStorage({\n\t\t\tkey: 'user'\n\t\t});\n\t\tuni.removeStorage({\n\t\t\tkey: 'market'\n\t\t});\n\t\tuni.redirectTo({\n\t\t\turl: '/pages/login/login'\n\t\t});\n\t},\n\tcheckUpdater: function(currentId, updaterPage) {\n\t\tuni.request({\n\t\t\turl: serverSrc + 'common/check_update/update',\n\t\t\tmethod: 'GET',\n\t\t\tsuccess: res => {\n\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\tif (currentId != res.data.version) { //检测到更新\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '发现新版本',\n\t\t\t\t\t\t\tcontent: '有新版本可用，请问您是否更新？',\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\t\t\turl: updaterPage\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tplayMessage: function() {\n\t\tconst innerAudioContext = uni.createInnerAudioContext();\n\t\tinnerAudioContext.autoplay = true;\n\t\tinnerAudioContext.src = this.serverSrc + 'static/music/message.mp3';\n\t\tinnerAudioContext.onPlay(() => {\n\t\t\t\n\t\t});\n\t\tinnerAudioContext.onError((res) => {\n\t\t\tconsole.log(res.errMsg);\n\t\t\tconsole.log(res.errCode);\n\t\t});\n\t}\n}\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\")\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render, staticRenderFns\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('774e8780', component.options)\n    } else {\n      api.reload('774e8780', component.options)\n    }\n    \n  }\n}\ncomponent.options.__file = \"C:/Users/Administrator/Desktop/schoolJiangHu/App.vue\"\nexport default component.exports","import mod from \"-!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--18-0!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--18-0!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import mod from \"-!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import { render, staticRenderFns } from \"./global.vue?vue&type=template&id=00533818&\"\nimport script from \"./global.vue?vue&type=script&lang=js&\"\nexport * from \"./global.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('00533818', component.options)\n    } else {\n      api.reload('00533818', component.options)\n    }\n    module.hot.accept(\"./global.vue?vue&type=template&id=00533818&\", function () {\n      api.rerender('00533818', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/Administrator/Desktop/schoolJiangHu/global.vue\"\nexport default component.exports","import mod from \"-!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--18-0!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./global.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--18-0!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./global.vue?vue&type=script&lang=js&\"","export * from \"-!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./global.vue?vue&type=template&id=00533818&\"","import 'uni-pages';\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport global_ from './global'//引用全局变量文件\r\nimport store from './store'//引用vuex配置文件\r\n\r\nVue.config.productionTip = false\r\n//全局变量文件挂载到Vue实例上面\r\nVue.prototype.GLOBAL = global_\r\n//vuex挂载到Vue实例上面\r\nVue.prototype.$store = store\r\nApp.mpType = 'app'\r\nconst app = new Vue({\r\n\tstore,\r\n    ...App\r\n})\r\napp.$mount()","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport global from '../global' //引用全局变量文件\r\nVue.use(Vuex)\r\n\r\nconst store = new Vuex.Store({\r\n\tstate: {\r\n\t\tuser: {\r\n\t\t\thasLogin: false, //是否登录\r\n\t\t\tid: 0,\r\n\t\t\topenId: '',\r\n\t\t\ttype: -1, //第三方登录类型\r\n\t\t\ttoken: '', //token\r\n\t\t\tphone: '', //手机号\r\n\t\t\tavatar: '', //头像\r\n\t\t\tpassword: '', //密码\r\n\t\t\tuserName: '', //昵称\r\n\t\t\tsex: 0, //性别\r\n\t\t\tmerchant: 0 //是否商家\r\n\t\t},\r\n\t\taddressInfo: { //地址信息\r\n\t\t\tname: null,\r\n\t\t\tphone: null,\r\n\t\t\tcity: null,\r\n\t\t\tadress: null\r\n\t\t},\r\n\t\tschool: {\r\n\t\t\tid: '11853391869743621792',\r\n\t\t\ttitle: '',\r\n\t\t\taddr: ''\r\n\t\t},\r\n\t\tselectSchool: {\r\n\t\t\tid: '11853391869743621792',\r\n\t\t\ttitle: '',\r\n\t\t\taddr: ''\r\n\t\t},\r\n\t\tmsgList: [{\r\n\t\t\t\tid: 69,\r\n\t\t\t\tto_id: 67,\r\n\t\t\t\tavatar: '../../../static/logo.png',\r\n\t\t\t\tname: \"to源哥\",\r\n\t\t\t\tmsg: '你是肥蛇吗？',\r\n\t\t\t\tstatus: \"未读\",\r\n\t\t\t\tunread: 1\r\n\t\t\t}, {\r\n\t\t\t\tid: 67,\r\n\t\t\t\tto_id: 69,\r\n\t\t\t\tavatar: '../../../static/logo.png',\r\n\t\t\t\tname: \"to蛇皮\",\r\n\t\t\t\tmsg: '源哥最帅',\r\n\t\t\t\tstatus: \"未读\",\r\n\t\t\t\tunread: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: 111,\r\n\t\t\t\tto_id: 70,\r\n\t\t\t\tavatar: '../../../static/logo.png',\r\n\t\t\t\tname: \"狸猫\",\r\n\t\t\t\tmsg: '怎么说呢',\r\n\t\t\t\tstatus: \"未读\",\r\n\t\t\t\tunread: 1\r\n\t\t\t}\r\n\t\t],\r\n\t\tunreadCount: 3,\r\n\t\thistoryMsg: {\r\n\t\t\t67: [{\r\n\t\t\t\tid: 100,\r\n\t\t\t\tname: \"历史\",\r\n\t\t\t\tface: \"https://staticimgs.oss-cn-beijing.aliyuncs.com/glogo.png\",\r\n\t\t\t\tctype: 1,\r\n\t\t\t\tmsg: \"历史消息演示文本内容...\",\r\n\t\t\t\tdate: '2018 01-01 00:00'\r\n\t\t\t}, {\r\n\t\t\t\tid: 100,\r\n\t\t\t\tname: \"历史\",\r\n\t\t\t\tface: \"https://staticimgs.oss-cn-beijing.aliyuncs.com/glogo.png\",\r\n\t\t\t\tctype: 1,\r\n\t\t\t\tmsg: \"源哥最帅\",\r\n\t\t\t\tdate: '2018 01-01 00:00'\r\n\t\t\t}],\r\n\t\t\t189: [{\r\n\t\t\t\tid: 100,\r\n\t\t\t\tname: \"to蛇皮\",\r\n\t\t\t\tface: \"https://staticimgs.oss-cn-beijing.aliyuncs.com/glogo.png\",\r\n\t\t\t\tctype: 1,\r\n\t\t\t\tmsg: \"历史消息演示文本内容...\",\r\n\t\t\t\tdate: '2018 01-01 00:00'\r\n\t\t\t}],\r\n\t\t\t70: [{\r\n\t\t\t\tid: 100,\r\n\t\t\t\tname: \"to蛇皮\",\r\n\t\t\t\tface: \"https://staticimgs.oss-cn-beijing.aliyuncs.com/glogo.png\",\r\n\t\t\t\tctype: 1,\r\n\t\t\t\tmsg: \"怎么说呢\",\r\n\t\t\t\tdate: '2018 01-01 00:00'\r\n\t\t\t}]\r\n\t\t}\r\n\t},\r\n\tmutations: {\r\n\t\tregSetPhoneAndPass(state, payload) {\r\n\t\t\tstate.user.phone = payload.phone;\r\n\t\t\tstate.user.password = payload.password;\r\n\t\t},\r\n\t\tregSetSex(state, sex) {\r\n\t\t\tstate.user.sex = sex;\r\n\t\t},\r\n\t\tregSetSchool(state, school) {\r\n\t\t\tstate.school = school;\r\n\t\t\tstate.selectSchool = school;\r\n\t\t},\r\n\t\tregSetAvatar(state, avatar) {\r\n\t\t\tstate.user.avatar = avatar;\r\n\t\t},\r\n\t\tregSetUserName(state, userName) {\r\n\t\t\tstate.user.userName = userName;\r\n\t\t},\r\n\t\tregAfterLogin(state, payload) {\r\n\t\t\tstate.user.id = payload.user.user_id;\r\n\t\t\tstate.user.phone = payload.user.phone;\r\n\t\t\tstate.user.sex = payload.user.sex;\r\n\t\t\tstate.user.userName = payload.user.user_name;\r\n\t\t\tstate.user.avatar = payload.user.avatar;\r\n\r\n\t\t\tstate.user.openId = payload.user.openId;\r\n\t\t\tstate.user.token = payload.token;\r\n\r\n\t\t\tstate.user.password = ''; //为了安全置空密码\r\n\t\t\tstate.user.hasLogin = true;\r\n\t\t\tthis.commit('loginAfterSetStorage');\r\n\t\t},\r\n\t\tlogin(state, payload) {\r\n\t\t\tstate.user.id = payload.user.user_id;\r\n\t\t\tstate.user.phone = payload.user.phone;\r\n\t\t\tstate.user.sex = payload.user.sex;\r\n\t\t\tstate.user.userName = payload.user.user_name;\r\n\t\t\tstate.user.avatar = payload.user.avatar;\r\n\t\t\tstate.user.merchant = payload.user.merchant;\r\n\t\t\tstate.user.openId = payload.user.openId;\r\n\t\t\tstate.user.token = payload.token;\r\n\r\n\t\t\tstate.school = payload.school;\r\n\t\t\tstate.selectSchool = state.school; //登陆后选择的学校默认是自己的学校\r\n\r\n\t\t\tstate.addressInfo = payload.addressInfo; //同步地址信息\r\n\t\t\tstate.user.hasLogin = true;\r\n\t\t\tthis.commit('loginAfterSetStorage');\r\n\t\t},\r\n\t\tlogOut(state) {\r\n\t\t\tstate.hasLogin = false;\r\n\t\t\tuni.clearStorage();\r\n\t\t},\r\n\t\tloginAfterSetStorage(state) {\r\n\t\t\tuni.setStorage({\r\n\t\t\t\tkey: 'user',\r\n\t\t\t\tdata: state.user\r\n\t\t\t});\r\n\t\t\tuni.setStorage({\r\n\t\t\t\tkey: 'school',\r\n\t\t\t\tdata: state.school\r\n\t\t\t});\r\n\t\t\tuni.setStorage({\r\n\t\t\t\tkey: 'selectSchool',\r\n\t\t\t\tdata: state.selectSchool\r\n\t\t\t});\r\n\t\t\tuni.setStorage({\r\n\t\t\t\tkey: 'addressInfo',\r\n\t\t\t\tdata: state.addressInfo\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetOpenId(state, playload) {\r\n\t\t\tstate.user.openId = playload.openId;\r\n\t\t\tstate.user.type = playload.type;\r\n\t\t},\r\n\t\tcheckSchool(state, payload) {\r\n\t\t\tstate.selectSchool = payload;\r\n\t\t\tuni.setStorage({\r\n\t\t\t\tkey: 'selectSchool',\r\n\t\t\t\tdata: payload,\r\n\t\t\t\tfail: function() {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: '学校切换失败！',\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tchangeAddressInfo(state, addressInfo) {\r\n\t\t\tstate.addressInfo = addressInfo;\r\n\t\t\tuni.setStorage({\r\n\t\t\t\tkey: 'addressInfo',\r\n\t\t\t\tdata: state.addressInfo\r\n\t\t\t});\r\n\t\t},\r\n\t\tappOnLunch(state, user) {\r\n\t\t\tstate.user = user;\r\n\t\t\tstate.school = uni.getStorageSync('school');\r\n\t\t\tstate.selectSchool = uni.getStorageSync('selectSchool');\r\n\t\t\tstate.addressInfo = uni.getStorageSync('addressInfo');\r\n\t\t\tuni.setTabBarBadge({\r\n\t\t\t\tindex: 2,\r\n\t\t\t\ttext: state.unreadCount.toString()\r\n\t\t\t});\r\n\t\t\t//暂时注释掉  个人详情开发完毕再搞\r\n\t\t\t//state.msgList = uni.getStorageSync('msgList');\r\n\t\t\t//state.historyMsg = uni.getStorageSync('historyMsg');\r\n\t\t},\r\n\t\tonMessage(state) {\r\n\t\t\tvar _self = this;\r\n\t\t\tuni.onSocketOpen(function(res) {\r\n\t\t\t\tconsole.log('WebSocket连接已打开！');\r\n\t\t\t\tvar initDate = {\r\n\t\t\t\t\tctype: 'init',\r\n\t\t\t\t\tid: state.user.id\r\n\t\t\t\t};\r\n\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\tdata: JSON.stringify(initDate)\r\n\t\t\t\t});\r\n\t\t\t\tuni.onSocketMessage(function(res) {\r\n\t\t\t\t\tglobal.playMessage(); //播放通知音乐\r\n\t\t\t\t\tvar newMsg = JSON.parse(res.data); //消息json转换为对象\r\n\t\t\t\t\tconsole.log(JSON.stringify(newMsg));\r\n\t\t\t\t\tvar payload = new Object(); //准备载荷\r\n\t\t\t\t\tpayload.newMsg = newMsg;\r\n\t\t\t\t\t//准备消息列表的消息文本\r\n\t\t\t\t\tvar msgListText = '';\r\n\t\t\t\t\tswitch (newMsg.ctype) { //根据newMsg.ctype转换为正确的消息列表的消息文本\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\tmsgListText = '[图片]';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\tmsgListText = '[语音]';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\tmsgListText = '[系统通知]';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tmsgListText = newMsg.msg;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//准备消息列表对象\r\n\t\t\t\t\tpayload.msgObj = {\r\n\t\t\t\t\t\tid: state.user.id,\r\n\t\t\t\t\t\tto_id: newMsg.id,\r\n\t\t\t\t\t\tavatar: newMsg.face,\r\n\t\t\t\t\t\tname: newMsg.name,\r\n\t\t\t\t\t\tmsg: msgListText,\r\n\t\t\t\t\t\tstatus: \"未读\",\r\n\t\t\t\t\t\tunread: 1\r\n\t\t\t\t\t};\r\n\t\t\t\t\t_self.commit('addMsg', payload); //提交载荷到addMsg处理\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\taddMsg(state, payload) {\r\n\t\t\tvar hasMsg = false; //检测消息列表是否有相同的人\r\n\t\t\tfor (var i = 0; i < state.msgList.length; i++) {\r\n\t\t\t\tif (state.msgList[i].to_id === payload.msgObj.to_id) {\r\n\t\t\t\t\thasMsg = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (hasMsg) {\r\n\t\t\t\tstate.historyMsg[payload.newMsg.id].push(payload.newMsg); //将消息放在历史记录\r\n\t\t\t\tstate.msgList[i].msg = payload.msgObj.msg; //更新消息列表消息内容\r\n\t\t\t\tstate.msgList[i].unread += 1; //未读数量+1\r\n\t\t\t} else {\r\n\t\t\t\tstate.historyMsg[payload.newMsg.to_id] = []; //新建历史记录数组 索引为对方id\r\n\t\t\t\tstate.historyMsg[payload.newMsg.to_id].push(payload.newMsg); //将此信息添加进刚新建的历史记录\r\n\t\t\t\tstate.msgList.unshift(payload.msgObj); //将消息列表对象添加进消息列表，并且置顶\r\n\t\t\t\tconsole.log(JSON.stringify(state.historyMsg));\r\n\t\t\t}\r\n\t\t\tuni.setTabBarBadge({\r\n\t\t\t\tindex: 2,\r\n\t\t\t\ttext: state.unreadCount.toString()\r\n\t\t\t});\r\n\r\n\t\t\tthis.commit('setMsgStorage');\r\n\t\t},\r\n\t\tsendMsg(state, newMsg) {\r\n\t\t\tuni.sendSocketMessage({\r\n\t\t\t\tdata: JSON.stringify(newMsg)\r\n\t\t\t});\r\n\t\t\tvar hasMsg = false; //消息列表是否有相同的人\r\n\t\t\tfor (var i = 0; i < state.msgList.length; i++) {\r\n\t\t\t\tif (state.msgList[i].to_id == newMsg.to_id) {\r\n\t\t\t\t\thasMsg = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//准备消息列表的消息文本\r\n\t\t\tvar msgListText = '';\r\n\t\t\tswitch (newMsg.ctype) { //根据newMsg.ctype转换为正确的消息列表的消息文本\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tmsgListText = '[图片]';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tmsgListText = '[语音]';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tmsgListText = '[系统通知]';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tmsgListText = newMsg.msg;\r\n\t\t\t}\r\n\t\t\tif (hasMsg) {\r\n\t\t\t\tstate.historyMsg[newMsg.to_id].push(newMsg); //添加历史记录\r\n\t\t\t\tstate.msgList[i].msg = msgListText; //更新消息列表消息文本\r\n\t\t\t} else {\r\n\t\t\t\t//创建消息列表对象\r\n\t\t\t\tvar msgListObj = {\r\n\t\t\t\t\tid: state.user.id,\r\n\t\t\t\t\tto_id: newMsg.id,\r\n\t\t\t\t\tavatar: newMsg.face,\r\n\t\t\t\t\tname: newMsg.name,\r\n\t\t\t\t\tmsg: msgListText,\r\n\t\t\t\t\tstatus: \"已读\",\r\n\t\t\t\t\tunread: 0\r\n\t\t\t\t};\r\n\t\t\t\tstate.historyMsg[newMsg.to_id] = []; //创建聊天历史记录数组\r\n\t\t\t\tstate.historyMsg[newMsg.to_id].push(newMsg); //添加此条消息到历史记录\r\n\t\t\t\tstate.msgList.unshift(msgListObj); //将消息列表对象添加进消息列表，并且置顶\r\n\t\t\t}\r\n\t\t\tthis.commit('setMsgStorage');\r\n\t\t},\r\n\t\tchangeMsg(state, index) {\r\n\t\t\t//设置tabbar的小红点\r\n\t\t\tstate.unreadCount -= state.msgList[index].unread;\r\n\t\t\tif (state.unreadCount !== 0) {\r\n\t\t\t\tuni.setTabBarBadge({\r\n\t\t\t\t\tindex: 2,\r\n\t\t\t\t\ttext: state.unreadCount.toString()\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tuni.removeTabBarBadge({\r\n\t\t\t\t\tindex: 2\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tstate.msgList[index].unread = 0;\r\n\t\t\tstate.msgList[index].status = \"已读\";\r\n\t\t\tthis.commit('setMsgStorage');\r\n\t\t},\r\n\t\tdelMsg(state, index) {\r\n\t\t\tstate.msgList.splice(index, 1);\r\n\t\t\tthis.commit('setMsgStorage');\r\n\t\t},\r\n\t\tsetMsgStorage(state) { //本地缓存消息列表和消息历史记录\r\n\t\t\tuni.setStorage({\r\n\t\t\t\tkey: 'msgList',\r\n\t\t\t\tdata: state.msgList\r\n\t\t\t});\r\n\t\t\tuni.setStorage({\r\n\t\t\t\tkey: 'historyMsg',\r\n\t\t\t\tdata: state.historyMsg\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n})\r\n\r\nexport default store\r\n"],"sourceRoot":""}