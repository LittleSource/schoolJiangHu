{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/pages/common/update.vue","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/pages/common/update.vue?8715","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/pages/common/update.vue?e0a5","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/main.js","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/pages/common/update.vue?d834","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/pages/common/update.vue?6e00","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/pages/common/update.vue?cb65","webpack:///C:/Users/Administrator/Desktop/schoolJiangHu/pages/common/update.vue?4af3"],"names":["data","info","Minfo","Mtip","updateInfo","latest","packgeSize","packgePath","downloadTask","downloadProgress","buttonLoading","installed","startProgress","currentIsLatest","onReady","getLatest","updated","uni","getStorageSync","onShow","haveDownloaded","onUnload","closeTask","showToast","onPullDownRefresh","stopPullDownRefresh","methods","text","title","duration","icon","showModal","content","success","res","confirm","plus","runtime","install","force","cancel","request","url","GLOBAL","serverSrc","method","statusCode","checkLatest","version","name","toFixed","setMinfo","type","abort","createTask","downloadFile","downloadLink","saveFile","tempFilePath","savedFilePath","setStorage","key","completed","console","log","onProgressUpdate","progress","handleUpdate","os","toLowerCase","iosLink","openURL","Page","App"],"mappings":"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","file":"pages/common/update.js","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default {\n\tdata() {\n\n\t\treturn {\n\t\t\tinfo: '正在加载', // 主标题显示版本号\n\t\t\tMinfo: '未知', // 副标题显示版本类型\n\t\t\tMtip: '', // 小提示标语\n\t\t\tupdateInfo: '无', // 更新摘要\n\n\t\t\tlatest: null, // 版本信息\n\t\t\tpackgeSize: null, // 更新包大小\n\t\t\tpackgePath: null, // 更新包的文件地址\n\t\t\tdownloadTask: null, // 下载任务\n\t\t\tdownloadProgress: 0, // 下载进度\n\n\t\t\tbuttonLoading: false, // 加载 - 标记\n\t\t\tinstalled: false, // 是否执行了安装 - 标记\n\t\t\tstartProgress: false, // 下载进行 - 标记\n\t\t\tcurrentIsLatest: true // 当前版本就是最新版本 - 标记\n\t\t}\n\t},\n\tonReady() {\n\t\tthis.getLatest()\n\t\tconst updated = uni.getStorageSync('updated')\n\t\tif (updated) {\n\t\t\tthis.packgePath = updated.packgePath\n\t\t}\n\t},\n\t// 如果用户下载后没有完成安装，却回到app，则执行这里\n\tonShow() {\n\t\tif (this.installed === true && this.packgePath) {\n\t\t\tthis.installed = false\n\t\t\tthis.haveDownloaded()\n\t\t}\n\t},\n\t// 用户关闭页面时检查是否存在下载任务\n\tonUnload() {\n\t\tif (this.downloadTask) {\n\t\t\tthis.closeTask()\n\t\t\tthis.showToast('更新被取消')\n\t\t}\n\t},\n\t// 下拉刷新更新\n\tonPullDownRefresh() {\n\t\tthis.getLatest()\n\t\tuni.stopPullDownRefresh()\n\t},\n\tmethods: {\n\t\t// 封装个Toast方便用\n\t\tshowToast(text) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: text,\n\t\t\t\tduration: 3000,\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t},\n\t\t// 已经下载了更新包但是没有安装\n\t\thaveDownloaded() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '更新尚未完成',\n\t\t\t\tcontent: '您已下载更新包，但是还没有完成安装，请问是否要继续安装更新包呢？',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tplus.runtime.install(this.packgePath, {\n\t\t\t\t\t\t\tforce: true\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.installed = true\n\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\tthis.showToast('更新被取消')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 取得最新版本及其所有信息\n\t\tgetLatest() {\n\t\t\tthis.info = '正在加载' // 主标题显示版本号\n\t\t\tthis.Minfo = '未知' // 副标题显示版本类型\n\t\t\tthis.updateInfo = '无' // 更新摘要\n\n\t\t\tthis.buttonLoading = true\n\t\t\tthis.latest = null\n\n\t\t\tuni.request({\n\t\t\t\turl: this.GLOBAL.serverSrc + 'common/check_update/update',\n\t\t\t\tmethod: 'GET',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\tthis.latest = res.data\n\t\t\t\t\t\tthis.buttonLoading = false\n\t\t\t\t\t\tthis.checkLatest()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 检查版本\n\t\tcheckLatest() {\n\t\t\tif (!this.latest.version) {\n\t\t\t\tthis.Mtip = '未找到发行版本'\n\t\t\t} else if (plus.runtime.version != this.latest.version) { // 当前版本与新版本不符（$current在main.js里）\n\t\t\t\tthis.currentIsLatest = false\n\t\t\t\tthis.Mtip = '发现新版本'\n\t\t\t\tthis.info = this.latest.name + ' ' + this.latest.version //名称 版本号\n\t\t\t\tthis.updateInfo = this.latest.info\n\t\t\t\tthis.packgeSize = (this.latest.packgeSize / 1048576).toFixed(2) + 'MB' // 请求取得的packgeSize是字节大小，转换为保留两位小数的MB\n\t\t\t\tthis.setMinfo(this.latest.type)\n\t\t\t} else {\n\t\t\t\tthis.showToast('当前是最新版了')\n\t\t\t\tthis.currentIsLatest = true\n\t\t\t\tthis.Mtip = '当前是最新版'\n\t\t\t\tthis.info = this.latest.name + ' ' + this.latest.version //名称 版本号\n\t\t\t\tthis.updateInfo = this.latest.info\n\t\t\t\tthis.setMinfo(this.latest.type)\n\t\t\t}\n\t\t},\n\t\t// 根据英文版本类型选择中文版本类型\n\t\tsetMinfo(type) {\n\t\t\tswitch (type) {\n\t\t\t\tcase 'base':\n\t\t\t\t\tthis.Minfo = '结构版'\n\t\t\t\t\tbreak\n\t\t\t\tcase 'alpha':\n\t\t\t\t\tthis.Minfo = '内测版'\n\t\t\t\t\tbreak\n\t\t\t\tcase 'beta':\n\t\t\t\t\tthis.Minfo = '公测版'\n\t\t\t\t\tbreak\n\t\t\t\tcase 'rc':\n\t\t\t\t\tthis.Minfo = '终测版'\n\t\t\t\t\tbreak\n\t\t\t\tcase 'release':\n\t\t\t\t\tthis.Minfo = '正式版'\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tthis.Minfo = '未知'\n\t\t\t}\n\t\t},\n\t\t// 关闭下载任务\n\t\tcloseTask() {\n\t\t\tthis.downloadTask.abort()\n\t\t\tthis.downloadTask = null\n\t\t\tthis.startProgress = false\n\t\t},\n\t\t// 开始下载任务\n\t\tcreateTask() {\n\t\t\t//判断是否已经存在任务\n\t\t\tif (this.packgePath) {\n\t\t\t\tthis.haveDownloaded()\n\t\t\t} else {\n\t\t\t\tthis.downloadProgress = 0\n\t\t\t\tthis.startProgress = true\n\t\t\t\t// 创建下载任务对象\n\t\t\t\tthis.downloadTask = uni.downloadFile({\n\t\t\t\t\turl: this.latest.downloadLink,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t\t// 保存下载的安装包\n\t\t\t\t\t\t\tuni.saveFile({\n\t\t\t\t\t\t\t\ttempFilePath: res.tempFilePath,\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\tthis.packgePath = res.savedFilePath\n\t\t\t\t\t\t\t\t\t// 进行安装\n\t\t\t\t\t\t\t\t\tplus.runtime.install(this.packgePath, {\n\t\t\t\t\t\t\t\t\t\tforce: true\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tthis.installed = true\n\t\t\t\t\t\t\t\t\t// 保存更新记录到stroage，方便下次启动app时删除安装包\n\t\t\t\t\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\t\t\t\t\tkey: 'updated',\n\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\tcompleted: true,\n\t\t\t\t\t\t\t\t\t\t\tpackgePath: this.packgePath\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('成功保存更新记录')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t// 任务完成，关闭下载任务\n\t\t\t\t\t\t\t\t\tthis.closeTask()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t// 进度条更新\n\t\t\t\tthis.downloadTask.onProgressUpdate((res) => {\n\t\t\t\t\tthis.downloadProgress = res.progress\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\thandleUpdate() {\n\t\t\t// 判断系统类型\n\t\t\tif (plus.os.name.toLowerCase() === 'android') {\n\t\t\t\tif (this.latest.downloadLink && this.latest.downloadLink !== '#') { // 我这里默认#也是没有地址，请根据业务自行修改\n\t\t\t\t\t// 安卓：创建下载任务\n\t\t\t\t\tthis.createTask()\n\t\t\t\t} else {\n\t\t\t\t\tthis.showToast('未找到下载地址')\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.latest.iosLink && this.latest.iosLink !== '#') { // 我这里默认#也是没有地址，请根据业务自行修改\n\t\t\t\t\t// 苹果：打开商店链接\n\t\t\t\t\tplus.runtime.openURL(this.latest.iosLink)\n\t\t\t\t} else {\n\t\t\t\t\tthis.showToast('未找到ios商店地址')\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", { staticClass: \"flex-column\" }, [\n    _c(\"view\", { staticClass: \"content\" }, [\n      _c(\"image\", {\n        staticClass: \"logo\",\n        attrs: { src: \"../../static/logo.png\" }\n      }),\n      _c(\"view\", { staticClass: \"mainInfo\" }, [\n        _c(\"text\", { staticClass: \"title\" }, [\n          _vm._v(_vm._s(_vm.info) + \" | \" + _vm._s(_vm.Minfo))\n        ]),\n        _c(\"text\", { staticClass: \"tip\" }, [_vm._v(\"\\\\n\" + _vm._s(_vm.Mtip))])\n      ]),\n      _c(\"text\", { staticClass: \"line\" })\n    ]),\n    _c(\"view\", [\n      _vm._m(0),\n      _c(\"view\", { staticClass: \"infoContent\" }, [\n        _c(\"text\", { staticClass: \"updateInfo\" }, [\n          _vm._v(_vm._s(_vm.updateInfo))\n        ])\n      ])\n    ]),\n    !_vm.currentIsLatest\n      ? _c(\"view\", [\n          _vm._m(1),\n          _c(\"view\", { staticClass: \"infoContent\" }, [\n            _c(\"text\", { staticClass: \"updateInfo\" }, [\n              _vm._v(_vm._s(_vm.packgeSize))\n            ])\n          ])\n        ])\n      : _vm._e(),\n    _c(\n      \"view\",\n      { staticClass: \"minorContent bottom_aera\" },\n      [\n        _vm.startProgress && !_vm.currentIsLatest\n          ? _c(\n              \"view\",\n              { staticClass: \"smallTitle\" },\n              [\n                _c(\"text\", [\n                  _vm._v(\"下载进度:\" + _vm._s(_vm.downloadProgress) + \"%\")\n                ]),\n                _c(\"progress\", {\n                  attrs: { percent: _vm.downloadProgress, \"stroke-width\": \"4\" }\n                })\n              ],\n              1\n            )\n          : _vm._e(),\n        !_vm.startProgress && !_vm.currentIsLatest\n          ? _c(\n              \"button\",\n              {\n                staticStyle: { \"background-color\": \"#fc4243\" },\n                attrs: { type: \"primary\", eventid: \"0807302a-0\" },\n                on: {\n                  click: function($event) {\n                    _vm.handleUpdate()\n                  }\n                }\n              },\n              [_vm._v(\"立即更新\")]\n            )\n          : _vm._e(),\n        _vm.currentIsLatest\n          ? _c(\n              \"button\",\n              {\n                staticStyle: { \"background-color\": \"#fc4243\" },\n                attrs: {\n                  loading: _vm.buttonLoading,\n                  type: \"primary\",\n                  eventid: \"0807302a-1\"\n                },\n                on: {\n                  click: function($event) {\n                    _vm.getLatest()\n                  }\n                }\n              },\n              [_vm._v(\"检查更新\")]\n            )\n          : _vm._e()\n      ],\n      1\n    )\n  ])\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"view\", { staticClass: \"infoContentTitle\" }, [\n      _c(\"text\", { staticClass: \"infoPic iconfont icon-info-circle\" }),\n      _c(\"text\", { staticClass: \"infoTitle\" }, [_vm._v(\"更新摘要\")])\n    ])\n  },\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"view\", { staticClass: \"infoContentTitle\" }, [\n      _c(\"text\", { staticClass: \"infoPic iconfont icon-tags\" }),\n      _c(\"text\", { staticClass: \"infoTitle\" }, [_vm._v(\"更新大小\")])\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import 'uni-pages';\nimport pageFactory from 'mpvue-page-factory'\n    import App from './pages/common/update.vue'\n    Page(pageFactory(App))","import { render, staticRenderFns } from \"./update.vue?vue&type=template&id=f96c653e&\"\nimport script from \"./update.vue?vue&type=script&lang=js&\"\nexport * from \"./update.vue?vue&type=script&lang=js&\"\nimport style0 from \"./update.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('f96c653e', component.options)\n    } else {\n      api.reload('f96c653e', component.options)\n    }\n    module.hot.accept(\"./update.vue?vue&type=template&id=f96c653e&\", function () {\n      api.rerender('f96c653e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/Administrator/Desktop/schoolJiangHu/pages/common/update.vue\"\nexport default component.exports","import mod from \"-!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--18-0!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--18-0!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"","import mod from \"-!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./update.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./update.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\project\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!./update.vue?vue&type=template&id=f96c653e&\""],"sourceRoot":""}